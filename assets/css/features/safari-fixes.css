/* ==========================================================================
   Safari 瀏覽器兼容性修復模組
   ========================================================================== */

/* Safari 中的平滑滾動 */
html {
    -webkit-scroll-behavior: smooth;
    scroll-behavior: smooth;
}

/* Safari 字體平滑 */
body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Safari 按鈕樣式重設 */
button,
.btn,
.contact-btn,
.btn-primary-custom,
.btn-outline-custom,
.btn-cta-primary,
.btn-cta-secondary {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border: none;
    outline: none;
}

/* Safari 輸入框樣式重設 */
input,
select,
textarea {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
    -webkit-border-radius: 0;
}

.search-input,
.filter-select {
    -webkit-appearance: none;
    background-image: none;
}

/* Safari 選擇框箭頭 */
.filter-select {
    background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"><path fill="%23666" d="M2 0L0 2h4zm0 5L0 3h4z"/></svg>');
    background-repeat: no-repeat;
    background-position: right 0.7rem top 50%;
    background-size: 0.65rem auto;
    padding-right: 2.5rem;
}

/* Safari 中的彈性佈局修復 */
.hero-buttons,
.cta-buttons {
    display: -webkit-flex;
    display: flex;
    -webkit-flex-wrap: wrap;
    flex-wrap: wrap;
    -webkit-justify-content: center;
    justify-content: center;
}

/* Safari 中的 Grid 佈局修復 */
.hours-grid,
.benefits-grid {
    display: -ms-grid;
    display: grid;
    -ms-grid-columns: repeat(auto-fit, minmax(250px, 1fr));
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
}

/* Safari 中的 transform 硬體加速 */
.floating-btn,
.news-card,
.service-card,
.contact-card,
.line-card,
.about-card,
.team-card,
.advantage-card,
.transport-card {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    will-change: transform;
}

/* Safari 瀏覽器特定樣式檢測 */
@media not all and (min-resolution:.001dpcm) {
    @supports (-webkit-appearance:none) {
        /* Safari 專用樣式 */
        .navbar {
            background: rgba(255, 255, 255, 0.98) !important;
        }
        
        .hero-section,
        .page-header {
            background-attachment: scroll !important;
        }
        
        /* Safari 漸變後備 */
        .floating-btn {
            background: var(--primary-blue) !important;
        }
        
        .stats-section,
        .cta-section,
        .business-hours {
            background: var(--primary-blue) !important;
        }
        
        .hero-section,
        .page-header {
            background: var(--secondary-blue) !important;
        }
    }
}

/* Safari 滾動條樣式 */
.category-tabs::-webkit-scrollbar {
    height: 4px;
}

.category-tabs::-webkit-scrollbar-track {
    background: var(--light-gray);
    border-radius: 2px;
}

.category-tabs::-webkit-scrollbar-thumb {
    background: var(--secondary-blue);
    border-radius: 2px;
}

/* Safari 圓角前綴支援 */
.floating-btn,
.hero-badge,
.page-badge,
.page-highlight,
.btn-primary-custom,
.btn-outline-custom,
.contact-btn,
.line-contact-btn,
.line-btn-small,
.btn-cta-primary,
.btn-cta-secondary {
    -webkit-border-radius: inherit;
}

/* Safari backdrop-filter 後備 */
.navbar {
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}

.map-overlay {
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}

.hours-item {
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}

/* Safari 轉場動畫前綴 */
.floating-btn,
.navbar,
.nav-link,
.navbar-phone,
.btn-primary-custom,
.btn-outline-custom,
.contact-btn,
.news-card,
.service-card,
.contact-card,
.line-card,
.about-card,
.team-card,
.line-btn,
.line-contact-btn,
.line-btn-small,
.btn-cta-primary,
.btn-cta-secondary {
    -webkit-transition: all var(--transition-normal);
}

/* Safari transform 前綴 */
.floating-btn:hover,
.news-card:hover,
.service-card:hover,
.contact-card:hover,
.line-card:hover,
.about-card:hover,
.team-card:hover,
.btn-primary-custom:hover,
.btn-outline-custom:hover,
.contact-btn:hover,
.line-btn:hover,
.line-contact-btn:hover,
.line-btn-small:hover,
.btn-cta-primary:hover,
.btn-cta-secondary:hover {
    -webkit-transform: inherit;
}

/* Safari 線性漸變前綴 */
.floating-btn,
.hero-section,
.page-header,
.stats-section,
.line-contact-section,
.cta-section,
.business-hours {
    background: -webkit-linear-gradient(inherit);
}

/* Safari 動畫前綴 */
.pulse-animation {
    -webkit-animation: pulse 2s infinite;
}

.loading i {
    -webkit-animation: spin 2s linear infinite;
}

@-webkit-keyframes pulse {
    0% { -webkit-transform: scale(1); }
    50% { -webkit-transform: scale(1.05); }
    100% { -webkit-transform: scale(1); }
}

@-webkit-keyframes spin {
    0% { -webkit-transform: rotate(0deg); }
    100% { -webkit-transform: rotate(360deg); }
}
